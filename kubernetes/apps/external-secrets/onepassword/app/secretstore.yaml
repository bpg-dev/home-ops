---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/clustersecretstore_v1.json
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: onepassword
  namespace: external-secrets
spec:
  provider:
    onepasswordSDK:
      vault: HomeInfra
      auth:
        serviceAccountSecretRef:
          name: onepassword-token
          namespace: external-secrets
          key: token
  # Retry settings optimized for 1Password Families rate limits
  # 1Password Families: 1,000 reads/hour, 1,000 total/day per account
  # Increased retry interval to 2m to avoid rapid retries when rate limited
  # This gives the rate limit window time to reset before retrying
  retrySettings:
    maxRetries: 3
    retryInterval: 2m
